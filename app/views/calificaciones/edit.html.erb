<% content_for :title, "Editar Calificación" %>

<div style="max-width: 600px; margin: 40px auto;">
  <h1 style="font-size: 24px; font-weight: bold; margin-bottom: 20px;">✏️ Editar Calificación</h1>

  <%= form_with(model: @calificacion, local: true, url: calificacione_path(@calificacion), method: :patch) do |f| %>
    <% if @calificacion.errors.any? %>
      <div style="background: #fee2e2; border: 1px solid #fca5a5; color: #991b1b; padding: 12px; border-radius: 6px; margin-bottom: 20px;">
        <h2 style="font-weight: 600; margin-bottom: 8px;"><%= pluralize(@calificacion.errors.count, "error") %> encontrado:</h2>
        <ul style="margin: 0; padding-left: 20px;">
          <% @calificacion.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div style="margin-bottom: 20px;">
      <label style="display: block; font-weight: 600; margin-bottom: 8px;">Estudiante</label>
      <%= f.select :estudiante_id, options_from_collection_for_select(@estudiantes, :id, :nombre, @calificacion.estudiante_id),
          { prompt: "Selecciona un estudiante" },
          style: "width: 100%; border: 1px solid #d1d5db; border-radius: 6px; padding: 10px 12px; font-size: 14px; font-family: inherit;" %>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; font-weight: 600; margin-bottom: 8px;">Taller</label>
      <%= f.select :taller_id, options_from_collection_for_select(@talleres, :id, :nombre, @calificacion.taller_id),
          { prompt: "Selecciona un taller" },
          style: "width: 100%; border: 1px solid #d1d5db; border-radius: 6px; padding: 10px 12px; font-size: 14px; font-family: inherit;" %>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; font-weight: 600; margin-bottom: 8px;">Nota (1.0 a 7.0)</label>
      <%= f.number_field :nota, min: 1.0, max: 7.0, step: 0.1,
          style: "width: 100%; border: 1px solid #d1d5db; border-radius: 6px; padding: 10px 12px; font-size: 14px; font-family: inherit;" %>
    </div>

    <div style="margin-bottom: 20px;">
      <label style="display: block; font-weight: 600; margin-bottom: 8px;">Descripción (Opcional)</label>
      <%= f.text_area :descripcion, rows: 4, placeholder: "Agrega comentarios sobre la calificación...",
          style: "width: 100%; border: 1px solid #d1d5db; border-radius: 6px; padding: 10px 12px; font-size: 14px; font-family: inherit; resize: vertical;" %>
    </div>

    <div style="display: flex; gap: 8px;">
      <%= f.submit "Guardar Cambios", style: "padding: 10px 16px; background: #2563eb; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500; flex-grow: 1;" %>
      <%= link_to "Cancelar", calificaciones_path, style: "padding: 10px 16px; background: #e5e7eb; color: #4b5563; border-radius: 6px; text-decoration: none; font-weight: 500; text-align: center; flex-grow: 1;" %>
    </div>
  <% end %>
</div>
